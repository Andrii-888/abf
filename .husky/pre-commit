#!/bin/bash
set -e

# === Проверяем, есть ли staged-файлы ===
if [ "$(git diff --cached --name-only --diff-filter=ACMR | wc -l)" -eq 0 ]; then
  echo "✅ No staged files — skipping lint-staged."
  exit 0
fi

echo "🔍 Running lint-staged..."
if npx lint-staged; then
  echo "✅ lint-staged completed successfully."
else
  echo "❌ lint-staged failed. Commit aborted."
  exit 1
fi
